add_namespace = louisiana

country_event = {
    id = louisiana.1
    title = louisiana.1.t
    desc = louisiana.1.d
    #picture = GFX_

    fire_only_once = yes

    trigger = {
        date > 1936.1.26
        tag = SLA
    }
    mean_time_to_happen = {
        days = 1
    }

    option = {
        name = louisiana.1.a
        ai_chance = {
            factor = 80
            modifier = {
                add = 20
                is_historical_focus_on = yes
            }
        }
        kill_country_leader = yes
        set_politics = {
            ruling_party = longism
        }
        add_popularity = {
            ideology = longism
            popularity = 0.3
        }
        # create_country_leader = {
        #     name = "Huey P. Long"
        #     picture = "leaders//SLA//portrait_huey_p_long.dds"
        #     expire = "1965.1.1"
        #     ideology = hueyism
        #     traits = {
        #         nationalist_symbol
        #         smooth_talking_charmer
        #         economic_reformer
        #         dictator
        #     }
        # }
        # complete_national_focus = SLA_elect_huey_long
        hidden_effect = {
            set_country_flag = SLA_huey_is_leader
        }
    }
}
country_event = {
    id = louisiana.2
    title = louisiana.2.t
    desc = louisiana.2.d
    #picture

    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = louisiana.2.a
        ai_chance = {
            factor = 100
        }
        give_guarantee = SOK
        create_faction = JEFFERSONIAN_LEAGUE
        set_rule = { can_create_factions = yes }
        SLA = { add_to_faction = SOK }
        # if = { #Code for once SLA has a focus tree
        #     limit = {
        #         is_faction_leader = yes
        #     }
        #     SLA = { add_to_faction = SOK }
        # }
        SOK = {
            country_event = {
                id = oklahoma.2
            }
        }
    }
    # option = {
    #     name = louisiana.2.b
    #     ai_chance = {
    #         factor = 0
    #     }
    #     SOK = {
    #         country_event = {
    #             id = oklahoma.3
    #         }
    #     }
    # }
}
country_event = {
    id = louisiana.3
    hidden = yes

    fire_only_once = yes
    is_triggered_only = no

    trigger = {
        OR = {
            # NOT = {
            #     STX = {
            #         controls_state = 621
            #         controls_state = 42
            #     }
            # }
            AND = {
                OR = {
                    SLA = {
                        controls_state = 612
                    }
                    SOK = {
                        controls_state = 612
                    }
                }
                OR = {
                    SLA = {
                        controls_state = 42
                    }
                    SOK = {
                        controls_state = 42
                    }
                }
            }
            has_global_flag = {
                flag = red_river_war_has_begun
                days > 240
            }
        }
    }

    immediate = {
        if = {
            limit = {
                STX = {
                    OR = {
                        NOT = {
                            controls_state = 621
                        }
                        NOT = {
                            controls_state = 42
                        }
                    }
                }
            }
            SLA = {
                country_event = {
                    id = louisiana.4 #victory
                }
            }
        }
        else_if = {
            limit = {
                STX = {
                    OR = {
                        controls_state = 152
                        controls_state = 236
                        controls_state = 240
                        controls_state = 235
                    }
                    OR = {
                        controls_state = 75
                        controls_state = 20
                    }
                }
            }
            STX = {
                country_event = {
                    id = louisiana.6 #loss
                }
            }
        }
        else = {
            SLA = {
                country_event = {
                    id = louisiana.7 #stalemate
                }
            }
        }
    }
}
country_event = { #supreme victory
    id = louisiana.4
    title = louisiana.4.t
    desc = louisiana.4.d
    picture = GFX_

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = louisiana.4.a
        ai_chance = {
            factor = 100
        }
        SOK = {
            country_event = {
                id = oklahoma.5
            }
        }
    }
    option = {
        name = louisiana.4.b
        ai_chance = {
            factor = 0
        }
        custom_effect_tooltip = STX_more_troops_to_defend_tt
        hidden_effect = {
            STX = {
                load_oob = "STX_defense_red_river"
            }
        }
    }
}
country_event = { #victory (Old Shit Victory)
    id = louisiana.5
    title = louisiana.5.t
    desc = louisiana.5.d
    picture = GFX_

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = louisiana.5.a
        ai_chance = {
            factor = 100
        }
        SOK = {
            country_event = {
                id = oklahoma.7
            }
        }
    }
    option = {
        name = louisiana.5.b
        ai_chance = {
            factor = 0
        }
        custom_effect_tooltip = STX_more_troops_to_defend_tt
        hidden_effect = {
            STX = {
                load_oob = "STX_defense_red_river"
            }
        }
    }
}
country_event = { #loss
    id = louisiana.6
    title = louisiana.6.t
    desc = louisiana.6.d
    picture = GFX_

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = louisiana.6.a
        ai_chance = {
            factor = 100
        }
        SOK = {
            country_event = {
                id = oklahoma.9
            }
        }
    }
    option = {
        name = louisiana.6.b
        ai_chance = {
            factor = 0
        }
        #custom_effect_tooltip = STX_more_troops_to_defend_tt
        #hidden_effect = {
        #    STX = {
        #        load_oob = "STX_defense_red_river"
        #    }
        #}
    }
}
country_event = { #stalemate
    id = louisiana.7
    title = louisiana.7.t
    desc = louisiana.7.d
    picture = GFX_

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = louisiana.7.a
        ai_chance = {
            factor = 100
        }
        SOK = {
            country_event = {
                id = oklahoma.11
            }
        }
    }
    option = {
        name = louisiana.7.b
        ai_chance = {
            factor = 0
        }
        custom_effect_tooltip = STX_more_troops_to_defend_tt
        hidden_effect = {
            STX = {
                load_oob = "STX_defense_red_river"
            }
        }
    }
}
country_event = { #Demand Biloxi
    id = louisiana.8
    title = louisiana.8.t
    desc = louisiana.8.d
    #picture = GFX_

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = louisiana.8.a
        ai_chance = {
            factor = 60
            modifier = {
                add = 20
                longism > 0.4
            }
            modifier = {
                add = 10
                longism > 0.5
            }
            modifier = {
                add = 20
                has_opinion = {
                    target = SLA
                    value > 60
                }
            }
            modifier = {
                add = 30
                is_historical_focus_on = yes
            }
            modifier = {
                add = 10
                strength_ratio = {
                    tag = SLA
                    ratio < 1
                }
            }
            modifier = {
                add = 20
                strength_ratio = {
                    tag = SLA
                    ratio < 0.75
                }
            }
            modifier = {
                add = -20
                strength_ratio = {
                    tag = SLA
                    ratio > 1
                }
            }
        }
        SLA = {
            transfer_state = 155
            if = {
                limit = {
                    is_faction_leader = yes
                }
                add_to_faction = SMS
            }
            give_guarantee = SMS
        }
        hidden_effect = {
            country_event = {
                id = louisiana.9
                days = 360
            }
        }
    }
    option = {
        name = louisiana.8.b
        ai_chance = {
            factor = 40
            modifier = {
                add = -20
                longism > 0.4
            }
            modifier = {
                add = -10
                longism > 0.5
            }
            modifier = {
                add = -20
                has_opinion = {
                    target = SLA
                    value > 60
                }
            }
            modifier = {
                add = -30
                is_historical_focus_on = yes
            }
            modifier = {
                add = -10
                strength_ratio = {
                    tag = SLA
                    ratio < 1
                }
            }
            modifier = {
                add = -20
                strength_ratio = {
                    tag = SLA
                    ratio < 0.75
                }
            }
            modifier = {
                add = 20
                strength_ratio = {
                    tag = SLA
                    ratio > 1
                }
            }
        }
        SLA = {
            create_wargoal = {
                target = SMS
                type = take_state_focus
                generator = { 155 }
            }
        }
        add_popularity = {
            ideology = longism
            popularity = -0.2
        }
    }
}
country_event = {
    id = louisiana.9
    title = louisiana.9.t
    desc = louisiana.9.d
    #picture = GFX_

    is_triggered_only = yes
    fire_only_once = yes

    option = {
        name = louisiana.9.a
        ai_chance = {
            factor = 75
            modifier = {
                add = 25
                is_historical_focus_on = yes
            }
            modifier = {
                add = -25
                democratic > 0.4
            }
        }
        start_civil_war = {
            ruling_party = longism
            ideology = democratic
            size = 0.6
        }
    }
    option = {
        name = louisiana.9.b
        ai_chance = {
            factor = 25
            modifier = {
                add = -25
                is_historical_focus_on = yes
            }
            modifier = {
                add = 25
                democratic > 0.4
            }
        }
        set_politics = {
            ruling_party = democratic
        }
        leave_faction = yes
        add_popularity = {
            ideology = democratic
            popularity = 0.2
        }
    }
}
######riots###should bypasssomething
country_event = {
    id = louisiana.10
    title = louisiana.10.t
    desc = louisiana.10.d
    #picture = GFX_

    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = louisiana.10.a
        add_stability = -0.05
        add_political_power = -125
        complete_national_focus = SLA_anti_huey_protests   
    }
}
#######New Orleans Secedes### War does not instantly break out######### Long realizes danger of full out war
country_event = {
    id = louisiana.11
    title = louisiana.11.t
    desc = louisiana.11.d
    #picture = GFX_

    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = louisiana.11.a
        release = ORL
        ORL = {
            transfer_state = 752
            transfer_state = 753
        }   
    }
}
######speech to annouce Louisiana will not invade New Orleans
country_event = {
    id = louisiana.12
    title = louisiana.12.t
    desc = louisiana.12.d
    #picture = GFX_

    fire_only_once = yes
    is_triggered_only = yes

    option = {
        name = louisiana.12.a   
    }
}
######news event on new orleans troop leaving
country_event = {
    id = louisiana.13
    title = louisiana.13.t
    desc = louisiana.13.d
    picture = GFX_general_flemming

    is_triggered_only = no
    fire_only_once = yes
    trigger = {
    date > 1936.04.10
    tag = SLA
    }

    option = {
        name = louisiana.13.a
    }
}
